<!doctype html>
<html data-theme="garden">
  <head>
    <title>Knitpicker</title>
    <!--
    Merely including daisyUI causes slow performance when editing large
    patterns. I don't know which component is to blame, so instead add
    specific ones.
    input,collapse,fab,toggle,range,label,card,textarea,button,tooltip
    join
    properties
    garden
    https://daisyui.com/docs/cdn/
    -->
    <link href="https://cdn.jsdelivr.net/combine/npm/daisyui@5/base/rootscrollgutter.css,npm/daisyui@5/base/scrollbar.css,npm/daisyui@5/base/rootcolor.css,npm/daisyui@5/base/rootscrolllock.css,npm/daisyui@5/base/reset.css,npm/daisyui@5/base/svg.css,npm/daisyui@5/base/properties.css,npm/daisyui@5/components/input.css,npm/daisyui@5/components/collapse.css,npm/daisyui@5/components/fab.css,npm/daisyui@5/components/toggle.css,npm/daisyui@5/components/range.css,npm/daisyui@5/components/label.css,npm/daisyui@5/components/card.css,npm/daisyui@5/components/textarea.css,npm/daisyui@5/components/button.css,npm/daisyui@5/components/tooltip.css,npm/daisyui@5/utilities/join.css,npm/daisyui@5/colors/properties.css,npm/daisyui@5/theme/light.css,npm/daisyui@5/theme/garden.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/react@18.3/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18.3/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/sortablejs@1.15.3/Sortable.min.js"></script>
    <!-- https://fonts.google.com/icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=content_copy,drag_indicator,edit,format_color_reset,link,palette,share,tune,zoom_in,zoom_out" />
    <style>
      /* Can't apply tailwind rounded-sm and border-0 classes to these pseudo
         elements, so doing it manually here. */
      input[type="color" i]::-webkit-color-swatch,
      input[type="color" i]::-moz-color-swatch {
        border-radius: 0.25rem;
        border-width: 0;
      }
    </style>
  </head>

  <body>
    <svg style="display: none;" width="24px" height="24px">
      <defs>
        <symbol id="stitch" viewBox="0 0 24 24">
          <path d="M0 0 L 12 6 L 24 0 L 24 18 L 12 24 L 0 18 z M 12 6 L 12 24"/>
        </symbol>
      </defs>
    </svg>

    <div id="appContainer"></div>

    <script src="app.js"></script>
    <script>
      const params = new URLSearchParams(window.location.search)

      // Initialize custom colors
      const customColors = {}
      for (const [key, value] of params.entries()) {
        if (key.startsWith('color_')) {
          const colorKey = key.substring(6) // Remove 'color_' prefix
          customColors[colorKey] = value
        }
      }

      // Initialize textarea from URL parameter or default
      decodeOrDefault(params.get('stitches')).then((defaultInput) => {
        ReactDOM.createRoot(
          document.getElementById('appContainer')
        ).render(
          createElement(App, {
            defaultInput,
            defaultCustomColors: customColors
          })
        )
      })
    </script>
  </body>
</html>
